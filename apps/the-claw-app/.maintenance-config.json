{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "version": "1.0.0",
  "description": "Configuration for automated maintenance and staleness detection",

  "staleness": {
    "thresholds": {
      "warning": {
        "days": 180,
        "description": "Warn if file hasn't been modified in 6 months"
      },
      "critical": {
        "days": 365,
        "description": "Critical if file hasn't been modified in 1 year"
      },
      "deprecated": {
        "days": 730,
        "description": "Consider deprecated if file hasn't been modified in 2 years"
      }
    },
    "excludePatterns": [
      "node_modules/**",
      ".git/**",
      "dist/**",
      "build/**",
      "coverage/**",
      ".expo/**",
      "*.lock",
      "package-lock.json",
      "yarn.lock",
      ".DS_Store",
      "*.log",
      "android/**",
      "ios/**"
    ],
    "criticalPaths": [
      "docs/patterns/**",
      "docs/09-security/**",
      "docs/11-deployment/**",
      "CLAUDE.md",
      "QUICKSTART.md",
      "README.md",
      "package.json",
      "jest.config.js",
      "tsconfig.json"
    ]
  },

  "versions": {
    "checkInterval": "weekly",
    "dependencies": {
      "expo": {
        "warningAge": 90,
        "criticalAge": 180,
        "allowedVersions": ["~54.0.0", "~55.0.0"]
      },
      "react": {
        "warningAge": 90,
        "criticalAge": 180,
        "allowedVersions": ["18.3.x"]
      },
      "react-native": {
        "warningAge": 90,
        "criticalAge": 180,
        "allowedVersions": ["0.76.x", "0.77.x"]
      },
      "@supabase/supabase-js": {
        "warningAge": 60,
        "criticalAge": 120,
        "allowedVersions": ["^2.45.0"]
      }
    },
    "devDependencies": {
      "typescript": {
        "warningAge": 90,
        "criticalAge": 180,
        "allowedVersions": ["~5.7.0"]
      },
      "jest": {
        "warningAge": 90,
        "criticalAge": 180,
        "allowedVersions": ["^29.7.0"]
      },
      "eslint": {
        "warningAge": 60,
        "criticalAge": 120,
        "allowedVersions": ["^9.0.0"]
      }
    },
    "ignoredPackages": [
      "husky",
      "chalk",
      "inquirer",
      "fs-extra"
    ]
  },

  "documentation": {
    "linkCheck": {
      "enabled": true,
      "timeout": 5000,
      "retries": 2,
      "excludeDomains": [
        "localhost",
        "127.0.0.1",
        "example.com"
      ],
      "allowedStatusCodes": [200, 201, 202, 203, 204, 301, 302, 307, 308]
    },
    "codeExamples": {
      "enabled": true,
      "languages": ["typescript", "javascript", "tsx", "jsx", "bash", "sh"],
      "skipPatterns": [
        "// @ts-ignore",
        "// @ts-expect-error",
        "// pseudo-code",
        "<!-- example only -->"
      ]
    },
    "references": {
      "checkFileExists": true,
      "patterns": [
        "docs/**/*.md",
        "src/**/*.{ts,tsx,js,jsx}",
        "scripts/**/*.{js,ts}",
        "*.md"
      ]
    },
    "markers": {
      "todo": ["TODO", "FIXME", "XXX", "HACK", "NOTE"],
      "outdated": ["OUTDATED", "⚠️ OUTDATED", "DEPRECATED"],
      "updateNeeded": ["UPDATE NEEDED", "NEEDS REVIEW", "VERIFY"]
    }
  },

  "coverage": {
    "targets": {
      "critical": {
        "statements": 90,
        "branches": 85,
        "functions": 90,
        "lines": 90,
        "paths": [
          "src/services/**",
          "src/hooks/**",
          "src/utils/**"
        ]
      },
      "high": {
        "statements": 80,
        "branches": 75,
        "functions": 80,
        "lines": 80,
        "paths": [
          "src/components/**",
          "src/contexts/**",
          "src/screens/**"
        ]
      },
      "standard": {
        "statements": 70,
        "branches": 60,
        "functions": 70,
        "lines": 70,
        "paths": [
          "src/**"
        ]
      }
    },
    "thresholds": {
      "global": {
        "statements": 70,
        "branches": 60,
        "functions": 70,
        "lines": 70
      }
    },
    "exemptions": [
      "src/**/*.d.ts",
      "src/**/*.stories.{ts,tsx}",
      "src/**/__tests__/**",
      "src/**/index.{ts,tsx}",
      "src/**/*.types.{ts,tsx}"
    ]
  },

  "navigation": {
    "mainDocs": [
      "README.md",
      "QUICKSTART.md",
      "CLAUDE.md",
      "CONTRIBUTING.md"
    ],
    "requiredLinks": {
      "README.md": [
        "QUICKSTART.md",
        "CLAUDE.md",
        "docs/00-getting-started/CLAUDE-SETUP.md"
      ],
      "CLAUDE.md": [
        "docs/patterns/NEW-FEATURE.md",
        "docs/patterns/NEW-SCREEN.md",
        "docs/patterns/SUPABASE-TABLE.md",
        "docs/09-security/SECURITY-CHECKLIST.md"
      ]
    },
    "categoryIndexes": [
      "docs/README.md",
      "scripts/README.md",
      ".examples/README.md"
    ]
  },

  "automation": {
    "schedule": {
      "staleness": "weekly",
      "versions": "weekly",
      "docs": "daily",
      "coverage": "on-pr",
      "navigation": "weekly"
    },
    "reporting": {
      "formats": ["json", "html", "markdown"],
      "outputDir": ".maintenance",
      "createIssues": true,
      "issueLabels": ["maintenance", "automated"],
      "assignees": []
    },
    "notifications": {
      "slack": {
        "enabled": false,
        "webhookUrl": ""
      },
      "github": {
        "enabled": true,
        "createIssues": true,
        "updateExisting": true
      }
    }
  },

  "github": {
    "issues": {
      "staleness": {
        "title": "[Maintenance] Stale files detected",
        "labels": ["maintenance", "documentation", "staleness"],
        "assignees": [],
        "template": "maintenance-staleness.md"
      },
      "versions": {
        "title": "[Maintenance] Dependency updates available",
        "labels": ["maintenance", "dependencies"],
        "assignees": [],
        "template": "maintenance-versions.md"
      },
      "docs": {
        "title": "[Maintenance] Documentation issues detected",
        "labels": ["maintenance", "documentation"],
        "assignees": [],
        "template": "maintenance-docs.md"
      },
      "coverage": {
        "title": "[Maintenance] Test coverage below threshold",
        "labels": ["maintenance", "testing"],
        "assignees": [],
        "template": "maintenance-coverage.md"
      }
    },
    "autoClose": {
      "enabled": true,
      "daysInactive": 14,
      "message": "Auto-closing as issues have been resolved or are no longer relevant."
    }
  },

  "priorities": {
    "critical": {
      "score": 100,
      "conditions": [
        "security-related file",
        "deployment configuration",
        "critical path file",
        "age > 1 year"
      ]
    },
    "high": {
      "score": 75,
      "conditions": [
        "documentation file",
        "core pattern file",
        "age > 9 months",
        "broken links"
      ]
    },
    "medium": {
      "score": 50,
      "conditions": [
        "example file",
        "age > 6 months",
        "outdated dependencies"
      ]
    },
    "low": {
      "score": 25,
      "conditions": [
        "optional feature",
        "age > 3 months"
      ]
    }
  },

  "fixes": {
    "autoFix": {
      "enabled": false,
      "allowedFixes": [
        "update-timestamps",
        "fix-broken-links",
        "update-version-numbers"
      ]
    },
    "createPR": {
      "enabled": true,
      "branchPrefix": "maintenance/",
      "requireApproval": true,
      "autoMerge": false
    }
  }
}
